"use strict";var k=Object.create;var f=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var S=(r,i)=>{for(var e in i)f(r,e,{get:i[e],enumerable:!0})},d=(r,i,e,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let c of v(i))!P.call(r,c)&&c!==e&&f(r,c,{get:()=>i[c],enumerable:!(l=N(i,c))||l.enumerable});return r};var T=(r,i,e)=>(e=r!=null?k(b(r)):{},d(i||!r||!r.__esModule?f(e,"default",{value:r,enumerable:!0}):e,r)),I=r=>d(f({},"__esModule",{value:!0}),r);var j={};S(j,{copyDir:()=>F,copyFile:()=>s,copyFiles:()=>C,default:()=>a});module.exports=I(j);var o=T(require("fs")),x=T(require("nunjucks")),y=T(require("path")),s=(r,i,e)=>{((e==null?void 0:e.createDirIfNot)??!0)&&!o.existsSync(y.default.resolve(i,"../"))&&(console.log("Creating directory: "+y.default.resolve(i,"../")),o.mkdirSync(y.default.resolve(i,"../"),{recursive:!0})),console.log("Copying file: "+r+" to "+i);let l=e!=null&&e.contentTransform?e==null?void 0:e.contentTransform(o.readFileSync(r,"utf-8")):o.readFileSync(r,"utf-8");o.writeFileSync(i,x.default.renderString(l,(e==null?void 0:e.context)??{}))},C=(...r)=>{for(let i of r)s(...i)},F=(r,i,e)=>{let l=(c,t)=>{let g=c.replace(r,"");console.log("newSrc",c),console.log("newDest",t),o.existsSync(t)||(console.log("Creating directory: "+t),o.mkdirSync(t,{recursive:!0}));let h=o.readdirSync(c);for(let n of h){let u=o.lstatSync(`${c}/${n}`);if(u.isDirectory()){if(e!=null&&e.asToCopyy&&!e.asToCopyy(`${g}/${n}`,"directory",{file:n,src:`${c}/${n}`,dest:`${t}/${n}`}))continue;l(`${c}/${n}`,`${t}/${n}`)}else if(u.isSymbolicLink()){if(e!=null&&e.asToCopyy&&!e.asToCopyy(`${g}/${n}`,"file",{file:n,src:`${c}/${n}`,dest:`${t}/${n}`}))continue;let $=o.readlinkSync(`${c}/${n}`);o.symlinkSync($,`${t}/${n}`)}else{if(e!=null&&e.asToCopyy&&!e.asToCopyy(`${g}/${n}`,"file",{file:n,src:`${c}/${n}`,dest:`${t}/${n}`}))continue;let $=`${t}/${e!=null&&e.fileNameTransform?e.fileNameTransform(n):n}`,m=e==null?void 0:e.context;s(`${c}/${n}`,$,{...e,context:m instanceof Function?m(n):m})}}};return console.log("dest",i),l(r,i)},a=class{constructor(i){this.opts=i}log(...i){this.opts.logging&&console.log(...i)}copyFile=(...i)=>{this.log("Copying file: "+i[0]),s(...i)};copyFiles=(...i)=>{this.log("Copying files: "+i.map(e=>e[0]).join(", ")),C(...i)};copyDir=(...i)=>{this.log("Copying directory: "+i[0]),F(...i)}};0&&(module.exports={copyDir,copyFile,copyFiles});
