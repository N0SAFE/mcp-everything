--- a/node_modules/vitest/dist/config.cjs
+++ b/node_modules/vitest/dist/config.cjs
@@ -2,7 +2,6 @@
 
 var os = require('node:os');
 var stdEnv = require('std-env');
-var vite = require('vite');
 
 // if changed, update also jsdocs and docs
 const defaultBrowserPort = 63315;
@@ -134,7 +133,15 @@ function defineWorkspace(config) {
 
 Object.defineProperty(exports, "mergeConfig", {
   enumerable: true,
-  get: function () { return vite.mergeConfig; }
+  get: function () { 
+    // Dynamically import vite to handle ES module compatibility
+    try {
+      const vite = require('vite');
+      return vite.mergeConfig;
+    } catch (err) {
+      if (err.code === 'ERR_REQUIRE_ESM') {
+        throw new Error('mergeConfig is not available when using Vite as ES module. Please use import("vitest/config") instead of require("vitest/config").');
+      }
+      throw err;
+    }
+  }
 });